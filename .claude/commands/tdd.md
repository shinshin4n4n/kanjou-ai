## TDD (Test-Driven Development) コマンド

新機能の実装を Red-Green-Refactor サイクルで進めてください。

### 必須ワークフロー

**Phase 1: 🔴 RED — 失敗するテストを書く**

1. 実装する機能の要件を確認
2. テストファイルを作成: `__tests__/{filename}.test.ts`
3. 期待する振る舞いをテストとして記述（正常系 + 異常系 + エッジケース）
4. `npm run test:unit -- {テストファイルパス}` を実行
5. **テストが失敗することを確認**（全テストがFAILであること）
6. テスト失敗の出力をユーザーに表示

**⚠️ テストが失敗するまで Phase 2 に進まないこと**

**Phase 2: 🟢 GREEN — テストを通す最小限の実装**

1. テストを通すために必要な最小限のコードを書く
2. 「きれいなコード」は不要。まずテストを通すことだけに集中
3. `npm run test:unit -- {テストファイルパス}` を実行
4. **全テストが通ることを確認**
5. テスト成功の出力をユーザーに表示

**⚠️ テストに書いていない機能を追加しないこと**

**Phase 3: 🔵 REFACTOR — テストを維持しながら改善**

1. コードの重複を除去
2. 命名を改善
3. 関数の分割・整理
4. `npm run test:unit -- {テストファイルパス}` を実行
5. **全テストが引き続き通ることを確認**

### 原則

- 1サイクルの粒度は小さく（1メソッド/1ユースケース単位）
- テストを修正するのではなく、実装を修正する
- テストが通らない状態でコミットしない
- カバレッジ 80% 以上を維持

### サイクル完了後

```bash
npm run test:unit:coverage
```

カバレッジレポートを確認し、不足があれば追加のTDDサイクルを回す。
